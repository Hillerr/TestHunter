{% extends 'base.html' %}
{% block content %}



<div class="container-fluid px-4">
    <h1 class="h2 mt-4">Dashboard</h1>
    <hr>
    <div class="row">
        <div class="col-md-3">
            <div class="card bg-light shadow-sm mb-5" style="max-width: 18rem;">
                <div class="card-header">Clientes Cadastrados</div>
                <div class="card-body text-dark">
                    <h2>{{clients_count}}</h2>
                    <a href="{% url 'my_clients' %}">
                        <i class="fa fa-eye"></i> Meus clientes
                    </a><br>
                    <a href="{% url 'new_client' %}"><i class="fa fa-user"></i> Adicionar cliente</a>
                </div>
            </div>

        </div>
        <div class="col-md-3">
            <div class="card bg-light shadow-sm mb-5" style="max-width: 18rem;">
                <div class="card-header">Testes finalizados</div>
                <div class="card-body text-dark">
                    <h2>{{tests_count}}</h2>
                    <a href="{% url 'my_tests' %}">
                        <i class="fa fa-eye"></i> Meus testes
                    </a><br>
                    <a href="{% url 'new_test' %}"><i class="fas fa-weight"></i> Adicionar teste</a>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card bg-light shadow-sm mb-5" style="max-width: 18rem;">
                <div class="card-header">Testes em andamento</div>
                <div class="card-body text-dark">
                    <h2>{{unfinished_tests_count}}</h2>
                    <a href="{% url 'my_unfinished_tests' %}">
                        <i class="fa fa-eye"></i> Meus testes em andamento
                    </a><br>
                    <a href="{% url 'new_test' %}"><i class="fas fa-weight"></i> Adicionar teste</a>
                </div>
            </div>
        </div>
    </div>
    <hr>
    <div class="card shadow-sm bg-light mb-2">
        <div class="card-header">
            <i class="fas fa-table me-1"></i>
            Top 10 clientes
        </div>
        <div class="card-body">
            <table class="table table-striped table-sm">
                <thead>
                    <tr>
                        <th>Nome</th>
                        <th>Tipo de cliente</th>
                        <th>Estado</th>
                        <th>Cidade</th>
                        <th>Email</th>
                        <th>Nota</th>
                    </tr>
                </thead>
                <tbody>
                    {% for client in clients %}
                    <tr>
                        <th scope="row"><a class="link-dark text-decoration-none" href="{% url 'client_detail' client.id %}">{{client.name}}</a></td>
                        <td>{{client.business}}</td>
                        <td>{{client.state}}
                        <td>{{client.city}}</td>
                        <td>{{client.email}}</td>
                        <td>{{client.grade}}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    <hr>
    <div class="card shadow-sm bg-light mb-5">
        <div class="card-header">
            <i class="fas fa-table me-1"></i>
            Meus últimos testes
        </div>
        <div class="card-body">
            <table class="table table-striped table-sm">
                <thead>
                    <tr>
                        <th>ID do teste</th>
                        <th>Produto testado</th>
                        <th>Cliente</th>
                        <th>Data de início</th>
                        <th>Data de finalização</th>
                        <th>Nota</th>
                    </tr>
                </thead>
                <tbody>
                    {% for test in tests %}
                    <tr>
                        <th scope="row"><a href="{% url 'test_detail' test.id %}" class="link-dark text-decoration-none">{{test.id}}</a></td>
                        <th scope="row"><a href="#" class="link-light text-decoration-none">{{test.product_tested}}</a></td>
                        <td>{{test.client}}</td>
                        <td>{{test.start_date}}</td>
                        <td>{{test.end_date}}</td>
                        <td>{{test.final_grade}}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>


{% endblock %}